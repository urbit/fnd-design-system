.markdown {
  @apply text-lite;
}

.md-spacing {
  @apply my-4 md:my-6 3xl:my-8;
}

.markdown .display * {
  margin-top: unset;
  margin-bottom: unset;
  margin-left: unset;
  padding: unset;
  padding-top: unset;
  padding-bottom: unset;
}

.markdown p:not(.md-exclude),
.markdown li,
.markdown table,
.markdown code[class*="language-"],
.markdown pre[class*="language-"] {
  @apply body-md;
  @apply !leading-normal;
}

.markdown p:not(.md-exclude) {
  @apply md-spacing;
}

.markdown ul,
.markdown ol,
.markdown blockquote {
  @apply md-spacing;
}

.markdown p a:not(.md-exclude, :has(code), :has(pre)),
.markdown li a:not(:has(code), :has(pre)) {
  @apply underline decoration-1 underline-offset-4 text-brite;
}

.markdown h1 a:not(:has(code), :has(pre)),
.markdown h2 a:not(:has(code), :has(pre)),
.markdown h3 a:not(:has(code), :has(pre)),
.markdown h4 a:not(:has(code), :has(pre)),
.markdown h5 a:not(:has(code), :has(pre)),
.markdown h6 a:not(:has(code), :has(pre)) {
  @apply underline decoration-2 underline-offset-4 text-brite;
}

/* Lists */

.markdown li:not(:last-child) {
  /* @apply mb-0.5; */
}

.markdown li li {
  /* @apply ml-4; */
}

.markdown ol li {
  @apply relative;
}

.markdown li ul,
.markdown li ol {
  /* @apply mt-0.5 mb-0; */
}

.markdown ul {
  list-style: outside;
  list-style-type: "â€” ";
}

.markdown ol {
  list-style: outside;
  list-style-type: none;
  counter-reset: list-number;
  margin-left: 2.5rem;
}

.markdown ol li:before {
  counter-increment: list-number;
  content: counter(list-number) " ";
  position: absolute;
  left: -2.5rem;
}

.markdown li ol li:before {
  content: counter(list-number, lower-alpha) " ";
}

/* Default Typography */

.markdown h1 {
  @apply h1 mt-16 mb-8 md:mt-24 md:mb-12;
}

.markdown h2 {
  @apply h1 mt-16 mb-8 md:mt-24 md:mb-12;
}

.markdown h3:not(.md-exclude) {
  @apply h2 mt-12 mb-6 md:mt-20 md:mb-10;
}

.markdown h4:not(.md-exclude) {
  @apply h3 mt-12 mb-6 md:mt-16 md:mb-8;
}

.markdown h5:not(.md-exclude) {
  @apply h3 mt-12 mb-6 mt-16 mb-8;
}

.markdown-callout p {
  @apply mt-1 mb-2 text-base;
}

.markdown hr:not(.md-exclude) {
  @apply md-spacing border-t-2 border-gray rounded-sm;
}

.markdown iframe {
  min-height: 512px;
}

/* Implicit "citation" heuristic */
.markdown blockquote > p > strong {
  font-style: normal;
}

.markdown hr + h1,
.markdown hr + h2,
.markdown hr + h3,
.markdown hr + h4,
.markdown hr + h5 {
  @apply !mt-4;
}

.markdown h1 code,
.markdown h2 code,
.markdown h3 code,
.markdown h4 code,
.markdown h5 code {
  @apply !font-mono;
}

.markdown hr:not(.md-exclude):has(+ h1),
.markdown hr:not(.md-exclude):has(+ h2),
.markdown hr:not(.md-exclude):has(+ h3),
.markdown hr:not(.md-exclude):has(+ h4),
.markdown hr:not(.md-exclude):has(+ h5) {
  @apply !mt-20;
}

.markdown.technical p code {
  white-space: pre-wrap;
}

/* Imagery */

.markdown img {
  @apply rounded-lg;
  max-height: 75vh;
}

.markdown span#figure {
  @apply relative md-spacing z-0 w-full left-0 block;
}

.markdown pre,
.markdown pre[class*="language-"] {
  @apply font-mono block !p-3 bg-tint rounded-lg w-full;
}

.markdown code,
.markdown code[class*="language-"] {
  @apply font-mono text-lite bg-tint rounded-md !px-[0.2em] !py-[0.1em] break-words;
}

.markdown a code,
.markdown a code[class*="language-"] {
  @apply decoration-0 bg-brite text-gray;
}

.markdown a:not(.md-exclude) {
  @apply text-brite;
}

.markdown blockquote {
  @apply border-l-2 border-lite pl-6;
}
.markdown blockquote cite {
  @apply font-semibold;
}

.markdown table {
  @apply table-fixed w-full;
  border-collapse: separate;
  border-spacing: 0;
}
.markdown table tr th,
.markdown table tr td {
  @apply font-normal;
  border-right-width: 2px;
  border-right-style: solid;
  padding: 8px !important;
  overflow-wrap: break-word;
  text-align: left;
  vertical-align: middle;
}

.markdown table tr td {
  @apply border-b-2 border-tint;
}

.markdown table tr td:first-child {
  @apply border-l-2 border-tint;
}

.markdown table tr th {
  @apply bg-tint border-black;
}

.markdown table tr th:first-child {
  @apply border-l-2 border-l-tint;
}

.markdown table tr th:last-child {
  @apply border-r-2 border-r-tint;
}

/* top-left border-radius */
.markdown table tr:first-child th:first-child {
  border-top-left-radius: 8px;
}

/* top-right border-radius */
.markdown table tr:first-child th:last-child {
  border-top-right-radius: 8px;
}

/* bottom-left border-radius */
.markdown table tr:last-child td:first-child {
  border-bottom-left-radius: 8px;
}

/* bottom-right border-radius */
.markdown table tr:last-child td:last-child {
  border-bottom-right-radius: 8px;
}
